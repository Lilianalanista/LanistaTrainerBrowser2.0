Stopwatch=function(b,a){this.startTime=0;this.stopTime=0;this.totalElapsed=0;this.started=false;this.listener=(b!=undefined?b:null);this.tickResolution=(a!=undefined?a:500);this.tickInterval=null;this.onehour=1000*60*60;this.onemin=1000*60;this.onesec=1000};Stopwatch.prototype.start=function(){var a=function(b,c){return function(){return c.call(b)}};if(!this.started){this.startTime=new Date().getTime();this.stopTime=0;this.started=true;this.tickInterval=setInterval(a(this,this.onTick),this.tickResolution)}};Stopwatch.prototype.stop=function(){if(this.started){this.stopTime=new Date().getTime();this.started=false;var a=this.stopTime-this.startTime;this.totalElapsed+=a;if(this.tickInterval!=null){clearInterval(this.tickInterval)}}return this.getElapsed()};Stopwatch.prototype.reset=function(){this.totalElapsed=0;this.startTime=new Date().getTime();this.stopTime=this.startTime};Stopwatch.prototype.restart=function(){this.stop();this.reset();this.start()};Stopwatch.prototype.getElapsed=function(){var b=0;if(this.started){b=new Date().getTime()-this.startTime}b+=this.totalElapsed;var a=parseInt(b/this.onehour);b%=this.onehour;var e=parseInt(b/this.onemin);b%=this.onemin;var d=parseInt(b/this.onesec);var c=b%this.onesec;return{hours:a,minutes:e,seconds:d,milliseconds:c}};Stopwatch.prototype.setElapsed=function(a,c,b){this.reset();this.totalElapsed=0;this.totalElapsed+=a*this.onehour;this.totalElapsed+=c*this.onemin;this.totalElapsed+=b*this.onesec;this.totalElapsed=Math.max(this.totalElapsed,0)};Stopwatch.prototype.toString=function(){var a=function(d,c){d=d.toString();while(d.length<c){d="0"+d}return d};var b=this.getElapsed();return a(b.hours,2)+":"+a(b.minutes,2)+":"+a(b.seconds,2)};Stopwatch.prototype.setListener=function(a){this.listener=a};Stopwatch.prototype.onTick=function(){if(this.listener!=null){this.listener(this)}};