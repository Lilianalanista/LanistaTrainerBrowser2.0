{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "closeAction": null,
        "controller": null,
        "designer|userAlias": "exercisesPanel",
        "designer|userClassName": "ExercisesPanel",
        "frameHeader": false,
        "headerPosition": "bottom",
        "height": 250,
        "id": "exercisesPanel",
        "title": null,
        "width": 400
    },
    "designerId": "aa89f94c-06f3-4926-bc83-e15dfd25119d",
    "viewControllerInstanceId": "ee96ef36-f3bd-46be-85ca-210796d5008b",
    "viewModelInstanceId": "442984ea-9f22-448f-a9f5-f679cd118770",
    "cn": [
        {
            "type": "Ext.view.View",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "cls": [
                    "lanista-view-exercises"
                ],
                "controller": null,
                "id": "viewExercises",
                "itemSelector": "div.exercise-item"
            },
            "name": "MyView1",
            "designerId": "7eec56c7-3b2b-405d-91aa-340d66ee410e",
            "cn": [
                {
                    "type": "Ext.XTemplate",
                    "reference": {
                        "name": "tpl",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|displayName": "tpl",
                        "implHandler": [
                            "<tpl for=\".\">",
                            "    <div class=\"lanista-x-exercise\">",
                            "        <div class=\"exercise-item\">",
                            "            <div class=\"lanista-icon lanista-item-delete\"></div>",
                            "            <div class=\"exercise-list-img exercise-list-img-right\" style=\"background-image: url({[(values.ext_id && values.ext_id.indexOf ('CUST') == -1) ? ('resources/images/previews/'+values.ext_id+'_1') : (Ext.ux.ConfigManager.getServer() + Ext.ux.ConfigManager.getRoot() + '/tpmanager/img/s/'+values.ext_id+'_1')]}.jpg);\"></div>",
                            "            <div class=\"exercise-list-img exercise-list-img-left\" style=\"background-image: url({[(values.ext_id && values.ext_id.indexOf ('CUST') == -1) ? ('resources/images/previews/'+values.ext_id+'_2') : (Ext.ux.ConfigManager.getServer() + Ext.ux.ConfigManager.getRoot() + '/tpmanager/img/s/'+values.ext_id+'_2')]}.jpg);\"></div>",
                            "            <div class=\"exercise-list-text\">{[values[\"name_\" + Ext.ux.LanguageManager.lang]]}</div>",
                            "        </div>",
                            "    </div>",
                            "</tpl>"
                        ]
                    },
                    "name": "tpl",
                    "designerId": "c5d8e92d-3528-48ec-b2be-903175b5ae5d"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onViewExercisesHide",
                        "implHandler": [
                            "    component.destroy();"
                        ],
                        "name": "hide",
                        "scope": "me"
                    },
                    "name": "onViewExercisesHide",
                    "designerId": "26338e28-a219-49dc-850c-ac5750b5bf11"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onViewExercisesAfterRender",
                        "implHandler": [
                            "",
                            "var itemRecord,",
                            "    el = component.el,",
                            "    itemId = [],",
                            "    favoritesArray = [],",
                            "    user = Ext.ux.SessionManager.getUser();",
                            "",
                            "el.on(",
                            "    'click', function(e,t) {",
                            "        if (LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 2] === 'FavoritesPanel') return;",
                            "",
                            "        if (((LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 2] !== 'DashboardPanel') &&",
                            "             (LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 2] !== 'LoginPanel')) &&",
                            "            (user && user.role !== '2'  && LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 1] === 'ExercisesSelectionView')",
                            "           )",
                            "        {",
                            "            itemId = [];",
                            "            itemId[0] = component.getRecord(t).data.id;",
                            "            itemId[1] = component.getRecord(t).data.ext_id;",
                            "",
                            "            for(var i = 0; i < this.selection.length; i++) {",
                            "                if(this.selection[i][0] === itemId[0]) {",
                            "                    break;",
                            "                }",
                            "            }",
                            "            if (i === this.selection.length)",
                            "            {",
                            "                this.selection.push( itemId );",
                            "                Ext.get(t).addCls ( 'lanista-list-item-selected' );",
                            "                //LanistaTrainer.app.getController('ExercisesController').getRightCommandPanel().getComponent('addPlanExercisesButton').show();",
                            "            }",
                            "            else {",
                            "                if (this.selection[i][2] === 1 && !(this.selection[i][3])) {",
                            "                    this.selection[i][3] = 'd';",
                            "                    Ext.get(t).removeCls ( 'lanista-list-item-selected' );",
                            "                }",
                            "                else {",
                            "                    if (this.selection[i][2] === 1 && this.selection[i][3] === 'd'){",
                            "                        this.selection[i][3] = '';",
                            "                        Ext.get(t).addCls ( 'lanista-list-item-selected' );",
                            "                        //LanistaTrainer.app.getController('ExercisesController').getRightCommandPanel().getComponent('addPlanExercisesButton').show();",
                            "                    }",
                            "                    else{",
                            "                        this.selection.splice(i, 1);",
                            "                        Ext.get(t).removeCls ( 'lanista-list-item-selected' );",
                            "                    }",
                            "                }",
                            "            }",
                            "        }",
                            "        else {",
                            "            itemRecord = component.getRecord(t);",
                            "            LanistaTrainer.app.getController('ExercisesController').getExercisesPanel().addCls ('blured');",
                            "            LanistaTrainer.app.panels[LanistaTrainer.app.panels.length] = 'ExercisePanel';",
                            "            LanistaTrainer.app.fireEvent('showExercisePanel', itemRecord, '');",
                            "        }",
                            "    },",
                            "    this, {delegate: '.exercise-item'});",
                            "el.on(",
                            "    'mouseover', function(e,t) {",
                            "                                    el.removeCls('item-not-clicked');",
                            "                                    el.addCls('item-clicked');",
                            "                               },",
                            "    this,{ delegate: '.exercise-item'});",
                            "el.on(",
                            "    'mouseout', function(e,t) {",
                            "",
                            "                                    el.removeCls('item-clicked');",
                            "                                    el.addCls('item-not-clicked');",
                            "                              },",
                            "    this,{delegate: '.exercise-item'});",
                            "",
                            ""
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "name": "onViewExercisesAfterRender",
                    "designerId": "e4237694-b05c-49c8-a8fe-b5bd4f92106d"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onViewExercisesViewReady",
                        "implHandler": [
                            "",
                            "var records = dataview.store.data.items,",
                            "    panel = LanistaTrainer.app.getController ('ExercisesController').getExercisesPanel(),",
                            "    favorites,",
                            "    favoritesArray = [],",
                            "    user = Ext.ux.SessionManager.getUser();",
                            "",
                            "if ( ((LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 2] !== 'DashboardPanel') &&",
                            "      (LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 2] !== 'LoginPanel') &&",
                            "      (LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 2] !== 'ExercisesPanel') &&",
                            "      (user && user.role !== '2'  && LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 1] === 'ExercisesSelectionView'))",
                            "   )",
                            " {",
                            "     if ( (LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 2] === 'FavoritesPanel')) {",
                            "            favorites = LanistaTrainer.app.getController ('FavoritesController').favorites.data.objects;",
                            "            favoritesArray = favorites !== \"\" ? favorites.split(',') : [];",
                            "",
                            "            if (favoritesArray.length > 0 ){",
                            "                for (var i = 0; i < records.length ; i++) {",
                            "                    for (var j = 0; j < favoritesArray.length; j++) {",
                            "                        if (Number(favoritesArray[j]) === Number(records[i].data.id)) {",
                            "                            break;",
                            "                        }",
                            "                    }",
                            "",
                            "                    if (j !== favoritesArray.length){",
                            "                        itemNode = dataview.getNode(records[i]);",
                            "                        Ext.get(itemNode).addCls ( 'lanista-list-item-selected' );",
                            "                    }",
                            "                }",
                            "            }",
                            "        }",
                            "        else{",
                            "            for (var i = 0; i < records.length ; i++) {",
                            "                for(var j = 0; j < panel.selection.length; j++) {",
                            "                    if(panel.selection[j][0] === records[i].data.id) {",
                            "                        break;",
                            "                    }",
                            "                }",
                            "                if (j !== panel.selection.length){",
                            "                    itemNode = panel.down('#viewExercises').getNode(records[i]);",
                            "                    Ext.get(itemNode).addCls ( 'lanista-list-item-selected' );",
                            "                }",
                            "            }",
                            "        }",
                            "}",
                            ""
                        ],
                        "name": "viewready",
                        "scope": "me"
                    },
                    "name": "onViewExercisesViewReady",
                    "designerId": "22449a04-c836-4f97-a607-84b65e48e3a3"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onViewExercisesItemClick",
                        "implHandler": [
                            "",
                            "var favorites = \"\",",
                            "    favoritesArray = [],",
                            "    pos;",
                            "",
                            "if (LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 2] === 'FavoritesPanel'){",
                            "    favorites = new String(LanistaTrainer.app.getController('FavoritesController').favorites.data.objects);",
                            "    if (favorites.valueOf()){",
                            "        if (favorites.indexOf(\",\") > 0)",
                            "            favoritesArray = favorites.split(\",\");",
                            "        else",
                            "            favoritesArray[0] = favorites.valueOf();",
                            "    }",
                            "",
                            "    pos = favoritesArray.indexOf(record.data.id.toString());",
                            "    if (pos >= 0){",
                            "        Ext.get(item).removeCls ( 'lanista-list-item-selected' );",
                            "        favoritesArray.splice(pos,1);",
                            "        favorites = \"\";",
                            "        if (favoritesArray.length > 0){",
                            "            favorites = favoritesArray[0];",
                            "            for (var i = 1; i < favoritesArray.length; i++){",
                            "                favorites = favorites + ',' + favoritesArray[i];",
                            "            }",
                            "        }",
                            "        LanistaTrainer.app.getController('FavoritesController').favorites.data.objects = favorites;",
                            "    }",
                            "    else{",
                            "        Ext.get(item).addCls ( 'lanista-list-item-selected' );",
                            "        LanistaTrainer.app.getController('FavoritesController').favorites.data.objects = favorites.valueOf() ? favorites + ',' + record.data.id : record.data.id;",
                            "    }",
                            "}",
                            ""
                        ],
                        "name": "itemclick",
                        "scope": "me"
                    },
                    "name": "onViewExercisesItemClick",
                    "designerId": "f85f0bad-b0b0-4a9f-badd-cf619aa185ea"
                }
            ]
        },
        {
            "type": "Ext.panel.Tool",
            "reference": {
                "name": "tools",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "id": "previousExercises",
                "type": "prev"
            },
            "name": "MyTool",
            "designerId": "645d183f-c4e8-4bc7-b53c-9dddc016cf73"
        },
        {
            "type": "Ext.panel.Tool",
            "reference": {
                "name": "tools",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "id": "nextExercises",
                "type": "next"
            },
            "name": "MyTool1",
            "designerId": "13d4c522-9235-44e9-9633-69eb0f928520"
        }
    ]
}