{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "dashBoardController",
        "designer|userClassName": "DashBoardController",
        "id": "dashBoardController"
    },
    "designerId": "16630f1f-c099-4905-a757-af7f967204f8",
    "cn": [
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "mainStage",
                "selector": "#mainStage"
            },
            "designerId": "729ff64a-4397-47e7-aa12-1628f2f472c2"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "rightCommandPanel",
                "selector": "#rightCommandPanel"
            },
            "designerId": "987ec33b-3b25-4898-af61-59c2b9442fe1"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "leftCommandPanel",
                "selector": "#leftCommandPanel"
            },
            "designerId": "7911d5bb-447c-4deb-b060-5722110b2e9c"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "mainViewport",
                "selector": "mainViewport"
            },
            "designerId": "8154209f-c41e-49a8-90c5-1504fc479246"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "autoCreate": true,
                "ref": "dashBoardPanel",
                "selector": "#dashBoardPanel",
                "xtype": "dashBoardPanel"
            },
            "designerId": "1d67c2f3-5ce8-421e-9844-0d3abd78ef45"
        },
        {
            "type": "applicationaction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "callback"
                ],
                "fn": "onShowDashBoardPanel",
                "implHandler": [
                    "if (LanistaTrainer.app.panels[0])",
                    "{",
                    "    LanistaTrainer.app.fireEvent('closeLoginPanel', function() {",
                    "           LanistaTrainer.app.panels[0] = 'DashboardPanel';",
                    "           LanistaTrainer.app.fireEvent('displayDashBoard');",
                    "    });",
                    "}",
                    "else",
                    "{",
                    "    LanistaTrainer.app.panels[0] = 'DashboardPanel';",
                    "    LanistaTrainer.app.fireEvent('displayDashBoard');",
                    "}"
                ],
                "name": "showDashBoardPanel",
                "scope": "this"
            },
            "designerId": "ee542d08-300e-45ba-9086-69db31eb30cf"
        },
        {
            "type": "applicationaction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "callback"
                ],
                "fn": "onCloseDashBoardPanel",
                "implHandler": [
                    "var controller = this;",
                    "LanistaTrainer.app.fireEvent('hideStage', function () {",
                    "    controller.getRightCommandPanel().items.each(function (item) {",
                    "        item.hide();",
                    "    });",
                    "    controller.getLeftCommandPanel().items.each(function (item) {",
                    "        item.hide();",
                    "    });",
                    "    controller.getDashBoardPanel().hide();",
                    "    if (callback instanceof Function) callback();",
                    "});"
                ],
                "name": "closeDashBoardPanel",
                "scope": "this"
            },
            "designerId": "af005e76-6327-4a96-bd49-2ac626c54ccd"
        },
        {
            "type": "applicationaction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onShowDashBoardHeaderUpdate",
                "implHandler": [
                    "",
                    "var controller = this,",
                    "    user = Ext.ux.SessionManager.getUser(),",
                    "    divLogo = '<div class=\"lansita-header-customer-image-not-found show-info-customer\" id=\"showPersonalDataButton\"><div class=\"lansita-header-customer-logo show-info-customer\" id=\"showPersonalDataButton\" style=\"background-image: url(' + Ext.ux.ConfigManager.getServer() + Ext.ux.ConfigManager.getRoot() + '/tpmanager/img/p/'+ localStorage.getItem( \"user_id\" ) + '_photo.jpg);\"></div></div>';",
                    "    divInfoCustomer = '<div class=\"lansita-header-customer-name\"> <span class=\"last-name\">' + user.last_name + '</span><br> <span class=\"first-name\">' + user.first_name +'</span></div>';",
                    "",
                    "controller.getMainViewport().down(\"#header\").update({",
                    "    info: divLogo + divInfoCustomer,",
                    "    title: Ext.ux.LanguageManager.TranslationArray.DASHBOARD.toUpperCase()",
                    "});",
                    "",
                    ""
                ],
                "name": "showDashBoardHeaderUpdate",
                "scope": "this"
            },
            "designerId": "25d6a991-ecba-46c7-a17a-90cb5359ee05"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "callback"
                ],
                "fn": "showCommands",
                "implHandler": [
                    "",
                    "var controller = this;",
                    "",
                    "controller.getRightCommandPanel().items.each(function (item) {",
                    "    item.hide();",
                    "});",
                    "",
                    "this.getRightCommandPanel().add(",
                    "    Ext.create('LanistaTrainer.view.LanistaButton', {",
                    "        text: Ext.ux.LanguageManager.TranslationArray.CUSTOMER_LIST,",
                    "        itemId: 'showCustomersPanelButton',",
                    "        userAlias: 'customerButton',",
                    "        glyph: '113@Lanista Icons' //q",
                    "    })",
                    ");",
                    "",
                    "this.getRightCommandPanel().add(",
                    "    Ext.create('LanistaTrainer.view.LanistaButton', {",
                    "        text: Ext.ux.LanguageManager.TranslationArray.EXERCISES,",
                    "        itemId: 'showExercisesPanelButton',",
                    "        style: 'float: left;',",
                    "        glyph: '78@Lanista Icons' //g",
                    "    })",
                    ");",
                    "",
                    "this.getRightCommandPanel().add(",
                    "    Ext.create('LanistaTrainer.view.LanistaButton', {",
                    "        text: Ext.ux.LanguageManager.TranslationArray.MENU_TEMPLATES,",
                    "        itemId: 'showTemplatesPanelButton',",
                    "        style: 'float: right;',",
                    "        glyph: '110@Lanista Icons' //n",
                    "    })",
                    ");",
                    "",
                    "",
                    ""
                ]
            },
            "designerId": "32b2b0ae-42d2-4c60-a858-4e12f9ed4db0"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "viewport #ShowDashBoardPanelButton",
                "designer|targetType": "LanistaButton",
                "fn": "onShowDashBoardButtonPanelClick",
                "implHandler": [
                    "LanistaTrainer.app.fireEvent('close' + LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 1], function() {",
                    "    LanistaTrainer.app.panels[LanistaTrainer.app.panels.length] = 'DashBoardPanel';",
                    "    LanistaTrainer.app.fireEvent('showDashBoardPanel');",
                    "});"
                ],
                "name": "click",
                "scope": "me"
            },
            "designerId": "5a8c5e79-76d0-49c9-bccc-0587b99d3ad1"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "viewport #closeDashBoardPanelButton",
                "designer|targetType": "LanistaButton",
                "fn": "onCloseDashBoardButtonPanelClick",
                "implHandler": [
                    "LanistaTrainer.app.panels.splice(LanistaTrainer.app.panels.length - 1, 1);",
                    "LanistaTrainer.app.fireEvent('closeDashBoardPanel', function() {",
                    "    LanistaTrainer.app.fireEvent('show' + LanistaTrainer.app.panels[LanistaTrainer.app.panels.length - 1]);",
                    "});",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "designerId": "27226ac9-f1a0-4190-bffe-d5b2d443dc26"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "loadData",
                "implHandler": [
                    ""
                ]
            },
            "designerId": "20a317cd-9e24-4134-aa0b-1ac69eb21d14"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getBirthdayCustomers",
                "implHandler": [
                    "var userId = localStorage.getItem(\"user_id\"),",
                    "    birthdayStore,",
                    "    controller = this,",
                    "    containerAux,",
                    "    dateFormat;",
                    "",
                    "controller.getDashBoardPanel().down('#customersContainer').down('#titlesCustomersAlerts').update({\t",
                    "    birthday1: Ext.ux.LanguageManager.TranslationArray.DASHBOARD_CUSTOMERS_BIRHDAY1,",
                    "    birthday2: Ext.ux.LanguageManager.TranslationArray.DASHBOARD_CUSTOMERS_BIRHDAY2,",
                    "    protocoll1: Ext.ux.LanguageManager.TranslationArray.DASHBOARD_CUSTOMERS_PROTOCOLL1 ,",
                    "    protocoll2: Ext.ux.LanguageManager.TranslationArray.DASHBOARD_CUSTOMERS_PROTOCOLL2 ",
                    "});",
                    "",
                    "Ext.define('Birthday', {",
                    "     extend: 'Ext.data.Model',",
                    "     fields: [",
                    "         {name: 'id',         type: 'string'},",
                    "         {name: 'first_name', type: 'string'},",
                    "         {name: 'last_name',  type: 'string'},",
                    "         {name: 'birthday',   type: 'string'}",
                    "     ]",
                    " });",
                    "",
                    " var birthdayStore = Ext.create('Ext.data.Store', {",
                    "     model: 'Birthday',",
                    "     proxy: {",
                    "         type: 'ajax',",
                    "         url: Ext.ux.ConfigManager.getRoot() + '/tpmanager/user/getbirthdayslist',",
                    "         headers: {",
                    "             user_id: userId",
                    "         },",
                    "         noCache: false,",
                    "         reader: {",
                    "             type: 'json',",
                    "             root: 'entries'",
                    "         }",
                    "     }",
                    " });",
                    "",
                    "birthdayStore.load(function(records, operation, success) {",
                    "    for(var i = 0; (i < records.length && i < 20); i++){",
                    "        containerAux = Ext.create('Ext.container.Container', {",
                    "            tpl: [",
                    "                '<div class=\"lanista-birthday-customer\" id={[values[\"id\"]]}>',",
                    "                '<div class=\"lanista-dashboard-customer-photo\" id=\"dahsboardcustomerItemInfo\" style=\"background-image: url({[Ext.ux.ConfigManager.getRoot() + \"/tpmanager/img/p/\" + values[\"id\"] + \"_photo.jpg\"]});\"></div>',",
                    "                '<div class=\"lanista-dashboard-customer-background\" id=\"dahsboardcustomerItem\" style=\"customer-image\">j</div>',",
                    "                '<div class=\"lanista-dashboard-text\">',",
                    "                '   <div class=\"lanista-birthday-firstname\">{first_name}</div>',",
                    "                '   <div class=\"lanista-birthday-lastname\">{last_name}</div>',",
                    "                '   <div class=\"lanista-birthday-date\">{birthday}</div>',",
                    "                '</div>',",
                    "                '</div>'",
                    "            ]",
                    "        });",
                    "",
                    "        dateFormat = Ext.ux.LanguageManager.lang === 'EN' ? Ext.util.Format.date( records[i].data.birthday, 'F d') :Ext.util.Format.date( records[i].data.birthday, 'd F');",
                    "        containerAux.update({\tid: records[i].data.id,",
                    "                                first_name: records[i].data.first_name,",
                    "                                last_name: records[i].data.last_name ,",
                    "                                birthday: dateFormat });",
                    "",
                    "        controller.getDashBoardPanel().down('#customersContainer').down('#customers').down('#birthdayCustomers').insert ( i, containerAux );",
                    "    }",
                    "});",
                    ""
                ]
            },
            "designerId": "a2275f3e-9e71-452e-a159-7b4f2bc45f71"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getActiveCustomers",
                "implHandler": [
                    "var userId = localStorage.getItem(\"user_id\"),",
                    "    birthdayStore,",
                    "    controller = this,",
                    "    containerAux,",
                    "    auxDate,",
                    "    dif,",
                    "    today,",
                    "    partNum = [],",
                    "    partDec = [];",
                    "",
                    "Ext.define('Birthday', {",
                    "     extend: 'Ext.data.Model',",
                    "     fields: [",
                    "         {name: 'id',         type: 'string'},",
                    "         {name: 'first_name', type: 'string'},",
                    "         {name: 'last_name',  type: 'string'},",
                    "         {name: 'last_protocoll_date',   type: 'string'},",
                    "         {name: 'email ',   type: 'string'}",
                    "     ]",
                    " });",
                    "",
                    " var birthdayStore = Ext.create('Ext.data.Store', {",
                    "     model: 'Birthday',",
                    "     proxy: {",
                    "         type: 'ajax',",
                    "         url: Ext.ux.ConfigManager.getRoot() + '/tpmanager/user/getselfprotocolledusers',",
                    "         headers: {",
                    "             user_id: userId",
                    "         },",
                    "         noCache: false,",
                    "         reader: {",
                    "             type: 'json',",
                    "             root: 'entries'",
                    "         }",
                    "     }",
                    " });",
                    "",
                    "birthdayStore.load(function(records, operation, success) {",
                    "    for(var i = 0; (i < records.length && i < 20); i++){",
                    "        containerAux = Ext.create('Ext.container.Container', {",
                    "            tpl: [",
                    "                '<div class=\"lanista-active-customer\" id={[values[\"id\"]]} >',",
                    "                '<div class=\"lanista-dashboard-customer-photo\" id=\"dahsboardcustomerItemInfo\" style=\"background-image: url({[Ext.ux.ConfigManager.getRoot() + \"/tpmanager/img/p/\" + values[\"id\"] + \"_photo.jpg\"]});\"></div>',",
                    "                '<div class=\"lanista-dashboard-customer-background\" id=\"dahsboardcustomerItem\" style=\"customer-image\">j</div>',",
                    "                '<div class=\"lanista-dashboard-text\">',",
                    "                '   <div class=\"lanista-birthday-firstname\">{first_name}</div>',",
                    "                '   <div class=\"lanista-birthday-lastname\">{last_name}</div>',",
                    "                '   <div class=\"lanista-birthday-date\">{last_protocoll_date}</div>',",
                    "                '</div>',",
                    "                '</div>'",
                    "            ]",
                    "        });",
                    "",
                    "        today = new Date();",
                    "        auxDate = new Date(records[i].data.last_protocoll_date);",
                    "        dif = ((today.getTime() - auxDate.getTime()) / 86400000) * 0.00274057;",
                    "        partNum = dif.toString().split(\".\");",
                    "",
                    "        if (partNum[1] > 0){",
                    "            partNum[1] = (dif - partNum[0]) / 0.0833;",
                    "            partDec = partNum[1].toString().split(\".\");",
                    "        }",
                    "",
                    "        containerAux.update({\tid: records[i].data.id,",
                    "                                first_name: records[i].data.first_name,",
                    "                                last_name: records[i].data.last_name,",
                    "                                last_protocoll_date: partNum[0] > 0 ? Ext.ux.LanguageManager.TranslationArray.DASHBOARD_ACTIVE_CUSTOMERS_FROM + ' ' + (partNum[0] + ' ' + Ext.ux.LanguageManager.TranslationArray.DASHBOARD_ACTIVE_CUSTOMERS_YEAR + ' ' + (partDec[0] > 0 ? partDec[0] + Ext.ux.LanguageManager.TranslationArray.DASHBOARD_ACTIVE_CUSTOMERS_MONTH : '')) :",
                    "                                                     partDec[0] > 0 ? Ext.ux.LanguageManager.TranslationArray.DASHBOARD_ACTIVE_CUSTOMERS_FROM + ' ' + partDec[0] + ' ' + Ext.ux.LanguageManager.TranslationArray.DASHBOARD_ACTIVE_CUSTOMERS_MONTH : '',",
                    "                                email: records[i].data.email});",
                    "",
                    "        controller.getDashBoardPanel().down('#customersContainer').down('#customers').down('#activeCustomers').insert ( i, containerAux );",
                    "    }",
                    "});",
                    ""
                ]
            },
            "designerId": "caae6ef6-1d67-4389-b278-23eb222e3fbe"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getPlansToExpire",
                "implHandler": [
                    "var userId = localStorage.getItem(\"user_id\"),",
                    "    birthdayStore,",
                    "    controller = this,",
                    "    containerAux,",
                    "    dateFormat;",
                    "",
                    "controller.getDashBoardPanel().down('#plansContainer').down('#titlesPlans').update({",
                    "    toexpire1: Ext.ux.LanguageManager.TranslationArray.DASHBOARD_PLANS_TOEXPIRE1,",
                    "    toexpire2: Ext.ux.LanguageManager.TranslationArray.DASHBOARD_PLANS_TOEXPIRE2,",
                    "    expired1: Ext.ux.LanguageManager.TranslationArray.DASHBOARD_PLANS_EXPIRED1 ,",
                    "    expired2: Ext.ux.LanguageManager.TranslationArray.DASHBOARD_PLANS_EXPIRED2",
                    "});",
                    "",
                    "Ext.define('Birthday', {",
                    "     extend: 'Ext.data.Model',",
                    "     fields: [",
                    "         {name: 'id',         type: 'string'},",
                    "         {name: 'first_name', type: 'string'},",
                    "         {name: 'last_name',  type: 'string'},",
                    "         {name: 'plan_name',   type: 'string'},",
                    "         {name: 'creation_date',   type: 'string'},",
                    "         {name: 'duration',   type: 'string'},",
                    "         {name: 'remaining_days',   type: 'string'},",
                    "         {name: 'user_id',   type: 'string'}",
                    "     ]",
                    " });",
                    "",
                    " var birthdayStore = Ext.create('Ext.data.Store', {",
                    "     model: 'Birthday',",
                    "     proxy: {",
                    "         type: 'ajax',",
                    "         url: Ext.ux.ConfigManager.getRoot() + '/tpmanager/user/getplansabouttoexpire',",
                    "         headers: {",
                    "             user_id: userId",
                    "         },",
                    "         noCache: false,",
                    "         reader: {",
                    "             type: 'json',",
                    "             root: 'entries'",
                    "         }",
                    "     }",
                    " });",
                    "",
                    "birthdayStore.load(function(records, operation, success) {",
                    "    for(var i = 0; (i < records.length && i < 20); i++){",
                    "        containerAux = Ext.create('Ext.container.Container', {",
                    "            cls: 'lanista-expire',",
                    "            tpl: [",
                    "                    '<div class=\"lanista-toexpire-plan\" id={[values[\"id\"]]}>',",
                    "                    '  <div class=\"lanista-toexpire-plan-data\">',",
                    "                    '      <div class=\"lanista-toexpire-plan-photo\">',",
                    "                    '         <div class=\"lanista-dashboard-expire-photo\" id=\"dahsboardcustomerItemInfo\" style=\"background-image: url({[Ext.ux.ConfigManager.getRoot() + \"/tpmanager/img/p/\" + values[\"user_id\"] + \"_photo.jpg\"]});\"></div>',",
                    "                    '         <div class=\"lanista-dashboard-expire-background\" id=\"dahsboardcustomerItem\" style=\"customer-image\">j</div>',",
                    "                    '      </div>',",
                    "                    '      <div class=\"lanista-dashboard-name\">',",
                    "                    '         <div class=\"lanista-toexpire-plan-name\">{first_name}</div>',",
                    "                    '         <div class=\"lanista-toexpire-plan-creation_date\">{last_name}</div>',",
                    "                    '      </div>',",
                    "                    '  </div>',",
                    "                    '  <div class=\"lanista-dashboard-text lanista-dashboard-text-exp\">',",
                    "                    '     <div class=\"lanista-toexpire-plan-name\">{plan_name}</div>',",
                    "                    '     <div class=\"lanista-toexpire-plan-creation_date\">{creation_date}</div>',",
                    "                    '     <div class=\"lanista-toexpire-plan-duration\">{duration}</div>',",
                    "                    '     <div class=\"lanista-toexpire-plan-remaining_days\">{remaining_days}</div>',",
                    "                    '  </div>',",
                    "                    '</div>'",
                    "            ]",
                    "        });",
                    "",
                    "        dateFormat = Ext.ux.LanguageManager.lang === 'EN' ? Ext.util.Format.date( records[i].data.birthday, 'F d') :Ext.util.Format.date( records[i].data.birthday, 'd F');",
                    "        containerAux.update({\tid: records[i].data.id,",
                    "                                first_name: records[i].data.first_name,",
                    "                                last_name: records[i].data.last_name ,",
                    "                                plan_name: records[i].data.plan_name,",
                    "                                creation_date: records[i].data.creation_date,",
                    "                                duration: records[i].data.duration,",
                    "                                user_id: records[i].data.user_id,",
                    "                                remaining_days: records[i].data.remaining_days});",
                    "          controller.getDashBoardPanel().down('#plansContainer').down('#plans').down('#plansToExpire').insert ( i, containerAux );",
                    "    }",
                    " });",
                    ""
                ]
            },
            "designerId": "9f76f503-813f-4b7f-b6d6-c3f24389c116"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getPlansExpired",
                "implHandler": [
                    "var userId = localStorage.getItem(\"user_id\"),",
                    "    birthdayStore,",
                    "    controller = this,",
                    "    containerAux,",
                    "    dateFormat;",
                    "",
                    "Ext.define('Birthday', {",
                    "     extend: 'Ext.data.Model',",
                    "     fields: [",
                    "         {name: 'customer_remote_id', type: 'string'},",
                    "         {name: 'first_name', type: 'string'},",
                    "         {name: 'last_name',  type: 'string'},",
                    "         {name: 'plan_name',   type: 'string'},",
                    "         {name: 'creation_date',   type: 'string'},",
                    "         {name: 'duration',   type: 'string'},",
                    "         {name: 'expired_days',   type: 'string'},",
                    "         {name: 'plan_id',   type: 'string'},",
                    "         {name: 'remaining_days',   type: 'string'}",
                    "     ]",
                    " });",
                    "",
                    " var birthdayStore = Ext.create('Ext.data.Store', {",
                    "     model: 'Birthday',",
                    "     proxy: {",
                    "         type: 'ajax',",
                    "         url: Ext.ux.ConfigManager.getRoot() + '/tpmanager/user/getexpiredexercises',",
                    "         headers: {",
                    "             user_id: userId",
                    "         },",
                    "         noCache: false,",
                    "         reader: {",
                    "             type: 'json',",
                    "             root: 'entries'",
                    "         }",
                    "     }",
                    " });",
                    "",
                    "birthdayStore.load(function(records, operation, success) {",
                    "    for(var i = 0; (i < records.length && i < 20); i++){",
                    "        containerAux = Ext.create('Ext.container.Container', {",
                    "            cls: 'lanista-expire',",
                    "            tpl: [",
                    "                    '<div class=\"lanista-toexpire-plan\" id={[values[\"plan_id\"]]}>',",
                    "                    '  <div class=\"lanista-toexpire-plan-data\">',",
                    "                    '      <div class=\"lanista-toexpire-plan-photo\">',",
                    "                    '         <div class=\"lanista-dashboard-expire-photo\" id=\"dahsboardcustomerItemInfo\" style=\"background-image: url({[Ext.ux.ConfigManager.getRoot() + \"/tpmanager/img/p/\" + values[\"customer_remote_id\"] + \"_photo.jpg\"]});\"></div>',",
                    "                    '         <div class=\"lanista-dashboard-expire-background\" id=\"dahsboardcustomerItem\" style=\"customer-image\">j</div>',",
                    "                    '      </div>',",
                    "                    '      <div class=\"lanista-dashboard-name\">',",
                    "                    '         <div class=\"lanista-toexpire-plan-name\">{first_name}</div>',",
                    "                    '         <div class=\"lanista-toexpire-plan-creation_date\">{last_name}</div>',",
                    "                    '      </div>',",
                    "                    '  </div>',",
                    "                    '  <div class=\"lanista-dashboard-text lanista-dashboard-text-exp\">',",
                    "                    '     <div class=\"lanista-toexpire-plan-name\">{plan_name}</div>',",
                    "                    '     <div class=\"lanista-toexpire-plan-creation_date\">{creation_date}</div>',",
                    "                    '     <div class=\"lanista-toexpire-plan-duration\">{duration}</div>',",
                    "                    '     <div class=\"lanista-toexpire-plan-remaining_days\">{expired_days}</div>',",
                    "                    '  </div>',",
                    "                    '</div>'",
                    "            ]",
                    "        });",
                    "",
                    "        dateFormat = Ext.ux.LanguageManager.lang === 'EN' ? Ext.util.Format.date( records[i].data.birthday, 'F d') :Ext.util.Format.date( records[i].data.birthday, 'd F');",
                    "        containerAux.update({\tcustomer_remote_id : records[i].data.customer_remote_id,",
                    "                                first_name: records[i].data.first_name,",
                    "                                last_name: records[i].data.last_name ,",
                    "                                plan_name: records[i].data.plan_name,",
                    "                                creation_date: records[i].data.creation_date,",
                    "                                duration: records[i].data.duration,",
                    "                                plan_id: records[i].data.plan_id,",
                    "                                expired_days: records[i].data.expired_days,",
                    "                                remaining_days: records[i].data.remaining_days});",
                    "",
                    "        controller.getDashBoardPanel().down('#plansContainer').down('#plans').down('#planExpired').insert ( i, containerAux );",
                    "    }",
                    "});",
                    ""
                ]
            },
            "designerId": "00058e13-d336-40f5-80a2-83ff4a848ccc"
        },
        {
            "type": "applicationaction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "callback"
                ],
                "fn": "onDisplayDashBoard",
                "implHandler": [
                    "var controller = this,",
                    "    dashBoardPanel\t= controller.getDashBoardPanel(),",
                    "    mainStage\t= controller.getMainStage();",
                    "",
                    "mainStage.add( dashBoardPanel );",
                    "",
                    "dashBoardPanel.on('hide', function(component) {",
                    "    component.destroy();",
                    "}, controller);",
                    "",
                    "// **** 1 create the commands",
                    "LanistaTrainer.app.setStandardButtons();",
                    "this.showCommands();",
                    "",
                    "controller.getActiveCustomers();",
                    "controller.getBirthdayCustomers();",
                    "controller.getPlansToExpire();",
                    "controller.getPlansExpired();",
                    "",
                    "// *** 2 Show the panel",
                    "LanistaTrainer.app.fireEvent('showDashBoardHeaderUpdate');",
                    "LanistaTrainer.app.fireEvent('showStage');",
                    "",
                    "// *** 4 Callback",
                    "if (callback instanceof Function) callback();",
                    "",
                    "// *** 5 Load data",
                    "controller.loadData();"
                ],
                "name": "displayDashBoard",
                "scope": "this"
            },
            "designerId": "47b97486-e22a-4018-aa21-76e8b6325557"
        }
    ]
}