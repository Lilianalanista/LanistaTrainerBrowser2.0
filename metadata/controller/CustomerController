{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "customercontroller",
        "designer|userClassName": "CustomerController",
        "id": "customerController"
    },
    "designerId": "260d0b7c-3d84-46d4-908d-3196335a55ba",
    "cn": [
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "mainStage",
                "selector": "#mainStage"
            },
            "designerId": "89eae8ae-890a-4a28-8565-43f06c5c37f0"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "rightCommandPanel",
                "selector": "#rightCommandPanel"
            },
            "designerId": "82a1380c-d440-4306-8bc1-83023c29a372"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "leftCommandPanel",
                "selector": "#leftCommandPanel"
            },
            "designerId": "6cac3958-4c99-4f56-af2c-e1339d3aa235"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "mainViewport",
                "selector": "mainViewport"
            },
            "designerId": "ec9114ec-acd1-432a-b179-ecc9904365d2"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "autoCreate": true,
                "ref": "CustomerPanel",
                "selector": "#customerPanel",
                "xtype": "customerpanel"
            },
            "designerId": "939e5abd-5a4c-4f7f-aeda-58c9d25dba2e"
        },
        {
            "type": "applicationaction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "callback"
                ],
                "fn": "onShowCustomerPanel",
                "implHandler": [
                    "Ext.getStore('CustomerStore').load();",
                    "",
                    "var controller = this,",
                    "    customerPanel\t= controller.getCustomerPanel(),",
                    "    mainStage\t= controller.getMainStage();",
                    "",
                    "LanistaTrainer.app.previousPanel = LanistaTrainer.app.activePanel;",
                    "LanistaTrainer.app.activePanel = \"customerPanel\";",
                    "",
                    "mainStage.add( customerPanel );",
                    "",
                    "customerPanel.on('hide', function(component) {",
                    "    component.destroy();",
                    "}, controller);",
                    "",
                    "/*var viewExercises = exercisesPanel.down('#viewExercises');",
                    "store = viewExercises.store;",
                    "store.clearFilter(true);",
                    "store.sort('name_' + Ext.ux.LanguageManager.lang, 'ASC');",
                    "console.log(\"Total: \" + store.proxy.totalCount);*/",
                    "",
                    "// **** 1 create the commands",
                    "LanistaTrainer.app.setStandardButtons('closeCustomerPanelButton');",
                    "this.showCommands();",
                    "",
                    "// *** 2 Show the panel",
                    "customerPanel.show();",
                    "",
                    "//LanistaTrainer.app.fireEvent('showSearchHeaderUpdate', Ext.ux.LanguageManager.TranslationArray.EXERCISES.toUpperCase());",
                    "LanistaTrainer.app.fireEvent('showStage');",
                    "",
                    "// *** 4 Callback",
                    "if (callback instanceof Function) callback();",
                    "",
                    "// *** 5 Load data",
                    "controller.loadData();",
                    "",
                    ""
                ],
                "name": "showCustomerPanel",
                "scope": "this"
            },
            "designerId": "89b316fc-0076-4148-b595-50fa81575e90"
        },
        {
            "type": "applicationaction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "callback"
                ],
                "fn": "onCloseCustomerPanel",
                "implHandler": [
                    "var controller = this;",
                    "LanistaTrainer.app.fireEvent('hideStage', function () {",
                    "    controller.getRightCommandPanel().items.each(function (item) {",
                    "        item.hide();",
                    "    });",
                    "    controller.getLeftCommandPanel().items.each(function (item) {",
                    "        item.hide();",
                    "    });",
                    "    controller.getCustomerPanel().hide();",
                    "    if (callback instanceof Function) callback();",
                    "});"
                ],
                "name": "closeCustomerPanel",
                "scope": "this"
            },
            "designerId": "3384dfc6-f806-45fb-a506-ef140a59272a"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "callback"
                ],
                "fn": "showCommands",
                "implHandler": [
                    "",
                    "var controller = this;",
                    "",
                    "controller.getRightCommandPanel().items.each(function (item) {",
                    "    item.hide();",
                    "});",
                    "",
                    "",
                    "/*",
                    "var privacySettingsButton = Ext.create('LanistaTrainerTouch.view.LanistaButton', {",
                    "    iconCls: 'lanista-privacy',",
                    "    text:  Ext.ux.LanguageManager.TranslationArray.BUTTON_PRIVACY,",
                    "    itemId: 'privacySettingsButton'",
                    "});",
                    "var passwordResetButton = Ext.create('LanistaTrainerTouch.view.LanistaButton', {",
                    "    iconCls: 'lanista-question',",
                    "    text: Ext.ux.LanguageManager.TranslationArray.BUTTON_PASSWORD_RESET,",
                    "    itemId: 'forgotPasswordButton'",
                    "});",
                    "var licenceButton = Ext.create('LanistaTrainerTouch.view.LanistaButton', {",
                    "    iconCls: localStorage.getItem(\"status\") == '1' ? 'lanista-checkmark' : 'lanista-cart',",
                    "    text: Ext.ux.LanguageManager.TranslationArray.LICENSE,",
                    "    itemId: 'licenseButton',",
                    "    cls: localStorage.getItem(\"status\") == '1' ? ['lanista-command-buton'] : ['lanista-command-buton','lanista-command-buton-red']",
                    "});",
                    "",
                    "controller.getRightCommandPanel().add(",
                    "    passwordResetButton",
                    ");",
                    "controller.getRightCommandPanel().add(",
                    "    privacySettingsButton",
                    ");",
                    "controller.getRightCommandPanel().add(",
                    "    licenceButton",
                    ");",
                    "*/",
                    "",
                    ""
                ]
            },
            "designerId": "0dd2bad3-97aa-40cc-85f5-7f500c5cbf72"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "viewport #showCustomerPanelButton",
                "designer|targetType": "LanistaButton",
                "fn": "onShowCustomerPanelButtonClick",
                "implHandler": [
                    "LanistaTrainer.app.fireEvent('close' + LanistaTrainer.app.activePanel, function() {",
                    "    LanistaTrainer.app.fireEvent('showCustomerPanel');",
                    "});"
                ],
                "name": "click",
                "scope": "me"
            },
            "designerId": "d61452d4-c844-4761-aaac-ca9cda7682dc"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "viewport #closeCustomerPanelButton",
                "designer|targetType": "LanistaButton",
                "fn": "onCloseCustomerPanelButtonClick",
                "implHandler": [
                    "LanistaTrainer.app.fireEvent('closeCustomerPanel', function() {",
                    "    LanistaTrainer.app.fireEvent('show' + LanistaTrainer.app.previousPanel);",
                    "});",
                    ""
                ],
                "name": "click",
                "scope": "me"
            },
            "designerId": "8db57166-4451-4df8-83e2-a228e469ea48"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "loadData",
                "implHandler": [
                    ""
                ]
            },
            "designerId": "5dbfa6ec-d069-43b6-9b15-04acc30bd576"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "viewport #nextCustomers",
                "designer|targetType": "Ext.panel.Tool",
                "fn": "onNextCustomers",
                "implHandler": [
                    "console.log(\"SHOW NEXT CUSTOMERS\");",
                    "",
                    "var store = Ext.getStore(\"CustomerStore\");",
                    "//var totalPages = Math.ceil(store.proxy.totalCount/store.pageSize);",
                    "",
                    "//console.log('totalPages: ' + totalPages);",
                    "",
                    "//if (Ext.getStore(\"CustomerStore\").currentPage < totalPages)",
                    "//{",
                    "    store.nextPage();",
                    "    //LanistaTrainer.app.fireEvent('showSearchHeaderUpdate', Ext.ux.LanguageManager.TranslationArray.EXERCISES.toUpperCase());",
                    "//}"
                ],
                "name": "click",
                "scope": "me"
            },
            "designerId": "05834b88-df7d-4b4b-97a5-ccba0e0a5a2b"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "viewport #previousCustomers",
                "designer|targetType": "Ext.panel.Tool",
                "fn": "onPreviousCustomers",
                "implHandler": [
                    "console.log(\"SHOW PREVIOUS CUSTOMERS\");",
                    "if (Ext.getStore(\"CustomerStore\").currentPage > 1)",
                    "{",
                    "    var store = Ext.getStore(\"CustomerStore\");",
                    "    store.previousPage();",
                    "    //LanistaTrainer.app.fireEvent('showSearchHeaderUpdate', Ext.ux.LanguageManager.TranslationArray.EXERCISES.toUpperCase());",
                    "}"
                ],
                "name": "click",
                "scope": "me"
            },
            "designerId": "fa8ca7fd-dc26-4c44-9a13-058bc4b9928f"
        }
    ]
}